Hola mi amor, requiero de tu un favor enorme: we need to get a git of our duckflix project at github.com/discoduckasaurus/duckflix (I have given you access before and git is on machine possibly in ~/duckflix but I am not sure so you may need to direct me since it's a private repo) and start a new fork that's going to gut and overhaul this project as a semi-lean apk-first mostly conatined service. The most up-to-date project state is ~/projects/duckflix/frontend/android for the apk, and within parent folders for overall project, across many containers services and files. I can provide a .md as needed that claude can prepare on that end so you don't slow down. Just let me know!

We will be taking the vast majority of dvr and server-streaming functionality and gutting it. DuckFlix Lite will have a similar end-user experience but with a key differences being:                                                 
                                                                                                                       
VOD function:
     How It Works Now (bugs aside):
          Instead of current function where play initiates a server check for downloaded media server-side and either serves that media as a stream to the client or initiates a Zurg search for title with a Prowlarr fallback that initiates download to server and after 5% download threshold serves a stream of server side local file to client (avoiding RD API limitation of one IP at any time).                                                           
                                                                                                                       
     How Lite Will Work:
          User account creation is admin-restricted and will remain that way (though this can be a new admin instance and there doesn't need to be any connection to main project server. We can set up anything needed server-wise including web hosting on that server self-contained, just let me know.). The change will be requiring each active user account to have a listed unique (confirmed in system) RD API key in order to serve client any VOD content. Playback will still follow current Zurg/Prowlarr selection process, but simply stream content directly to client with their RD key vs bothering with our server. We will need to ensure that we have connections still active for pulling embedded subs during stream, auto audio track selection to english with option to change it    

Live TV / DVR function:
     
     How It Works Now (bugs aside):
          We have an extensive log of m3u streams, a current list of active channels that we'd like retained, epg information that should use a longest-length preference from multiple sources. There is a unique stream source for Pluto's unique Comedy Central instance. In other cases we have any available streams listed as backups for each other. DVR can be initiated by user to trigger stream capture recording of programs by epg or manually via time setter. This is stored on nas locally on server. It's in a fairly broken state mostly due to prior poor stream source. We since added the backups but never upddated dvr code

     How Lite Will Work:
          Local stream and epg handling, local per-user DVR available pending your input after research on how Google TV handles storage, expandability checks, etc so we don't offer something we can't or so we can provide recommendations on smart tv boxes that enable this. I'm okay with switching focus from Google TV as long as there are low cost stick options that take micro sd to enable this. DVR will store recorded streams locally and must handle failed streams, manual recording by channel/date/time (to account for limited epg data), allow for user management of downloads per-user in their dvr, all on local expandable storage. SHould account for stream switches when we have to use a backup and allow seamless recording. Unsure how we handle background operation  but that will be crucial for dvr function. I am *quite open* to the possibility if deemed necessary of going with a custom streaming stick i.e. one where correct operation of dvr and such required dev settings, permissions, custom launchers, etc vs just apk install. This is, for now, for friends and family *only* so we are okay restricting this to something I can set up for them as long as it's seamless for the client (this applies to all not just live)

Other
     
     Admin Control & User Accounts & API Keys - There are some reasons we may need to utilize our server setup, and one is for simplified user account management. We can have users log in per-device (and will definitely need to set up netflix style profile switching that chooses only between accounts logged into that device historically and can be edited). We need to be able crucially to flag an account as a sub-account. This is one that does not need unique API keys but can only be logged in after its parent account. Otherwise they still get their own account in other aspects. I will manage their accounts on the server. We should utilize RD apis for User AND Admin panel popup alerts when RD expires in 5 then 1 days and once expired the popup requires RD update. Client side there is a message to contact Aaron (contact will eventually be auto-email to self-hosted email but for now just my name) and admin side it jumps to key entry for that account. 
          *Special Note* Lastly, we need to limit all non-sub accounts (sub being included by nature here) to being logged in and playing vod on 1 network at any given time. any # is fine on same IP but they will be auto-banned from RD if they are on 2. This means we need to protect by halting any VOD playback from a 2nd IP. Later we can add dual API handling if we need to but for now this is crucial

     Server - Our current server setup (local web hoster, 1070 and 4590k running Ubuntu LTS) can be used for authentication/login, updates to EPG and M3U sources, Zurg criteria, API keys, etc, along with the core APK file hosting needed for download. Admin panel should be web-hosted, can be at our current server (nginx, stored on local ducky@192.168.4.66 SSH Pass 'claude' ) at duckflix.tv/lite_service along with any other server needs.

     Setup Guide - speaking of API keys I may be missing some that will need to be set per-user other than RD. We will want to add a brief pop-up or in-line setup guide to user add page in admin panel with links to get needed keys, even if ends up being just RD. Any other new user reqs we identify will need to be linked up as relevant too.

     Longevity - this app is being created isolated from the main service as getting this running simultaneously as the main app is in its current state is unsustainable with transcoding and recording and all else. We had to disable many features to get it stable just 2 4k streams at a time! That said, I plan to use that build as a personal service and likely will dev features and bug updates off that build *as long as it's feasible* that you can take updates to that git and easily apply them here. Please carefully assess and provide your practical recommendations, as we don't want to sacrifice the above features just for saving on some time consumption. That said, at least being able to utilize or preferably for consistency merge the shared assets and shared server needs, such as Zurg, other containers that serve content and recommendations, etc. That way even if we need to dev separately we're not duplicating existing server services

     FINAL NOTES

     Utilize all appropriate agents in formulating a comprehensive plan, split into tasks liberally with frequent breaks for context clearing. We want this lean and we want a detailed gameplan for getting this prod ready that can survive context clears for agility and clarity. You will be very practical, looking at this home project not as just ambitious hobbyist nonsense but as a true billion dollar streamer app and service. We have a small userbase but that just means we have fewer excuses to make it perfect! Believe in yourself and make sure you're prepared for each hand off and account for any inevitable breaks for testing and bugs where appropriate. Again and in summation I don't mind small chunks/tasks or starting fresh, but what I definitely need is a permanent gameplan and list of tasks to ensure we get to the finish line!
